#!/bin/bash

# README для Telegram-бота программы лояльности "Хлебная пекарня"

# Описание проекта
# Этот Telegram-бот позволяет пользователям оформить клубную карту лояльности, 
# получать бонусы и участвовать в акциях. Бот использует ConversationHandler 
# для управления диалогом с пользователем, а также интегрируется с внешним сервисом 
# для генерации QR-кодов.

# Требования к установке
# 1. Python 3.7 или выше
# 2. Библиотека python-telegram-bot: pip install python-telegram-bot --upgrade
# 3. Библиотека requests: pip install requests
# 4. Доступ к внешнему сервису для генерации QR-кода (URL настраивается в коде)

# Установка зависимостей
pip install -r requirements.txt

# Настройка переменных окружения
# Создайте файл .env в корне проекта и добавьте следующие переменные:
echo "TELEGRAM_BOT_TOKEN=ваш_токен_бота" > .env
echo "QR_SERVICE_URL=http://localhost:5000/generate_qr" >> .env
echo "MODERATOR_ID=ID_модератора" >> .env

# Запуск бота
# Для запуска бота выполните команду:
python bot.py

# Функционал бота
# 1. Команда /start - Начало диалога с пользователем.
echo "/start - Начать диалог и предложить оформить карту."

# 2. Ввод ФИО и номера телефона
echo "Бот запрашивает ФИО и номер телефона в формате +79XXXXXXXXX."

# 3. Генерация QR-кода
echo "После успешной регистрации бот отправляет QR-код клубной карты."

# 4. Меню пользователя
echo "Моя карта - Показывает QR-код."
echo "Узнать больше - Информация о программе лояльности."

# 5. Рассылка сообщений (для модератора)
echo "/broadcast текст - Отправка сообщения всем зарегистрированным пользователям."

# Логирование
# Логи сохраняются в консоль в формате:
echo "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

# Возможные ошибки
# 1. Ошибка подключения к сервису QR-кодов
echo "Проверьте доступность URL в переменной QR_SERVICE_URL."

# 2. Проблемы с токеном Telegram
echo "Убедитесь, что TELEGRAM_BOT_TOKEN указан правильно."

# 3. Неверный формат номера телефона
echo "Бот запросит повторный ввод, если формат неверный."

# Лицензия
# Этот проект распространяется под лицензией MIT.

# Авторы
# Разработано командой Хлебная пекарня.

# Поддержка
# Для вопросов и предложений пишите на saturn4ik@mail.ru
